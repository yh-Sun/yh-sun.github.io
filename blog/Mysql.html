<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Mysql | å°å¤ªé˜³</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/logo-sun.png">
    <meta name="description" content="ç”Ÿæ´»è¿˜å¾—ç»§ç»­">
    <link rel="preload" href="/assets/css/0.styles.8707b1dd.css" as="style"><link rel="preload" href="/assets/js/app.7a41048e.js" as="script"><link rel="preload" href="/assets/js/2.07b944df.js" as="script"><link rel="preload" href="/assets/js/11.626aef4a.js" as="script"><link rel="prefetch" href="/assets/js/10.68cbf342.js"><link rel="prefetch" href="/assets/js/12.d6ac6fd7.js"><link rel="prefetch" href="/assets/js/13.6764e2b4.js"><link rel="prefetch" href="/assets/js/14.211f58d6.js"><link rel="prefetch" href="/assets/js/15.d52a5a17.js"><link rel="prefetch" href="/assets/js/16.e082a5ee.js"><link rel="prefetch" href="/assets/js/17.f122dbd2.js"><link rel="prefetch" href="/assets/js/18.c9092e4a.js"><link rel="prefetch" href="/assets/js/19.3173b85c.js"><link rel="prefetch" href="/assets/js/20.75bb07f3.js"><link rel="prefetch" href="/assets/js/3.a588e316.js"><link rel="prefetch" href="/assets/js/4.b6ca1f26.js"><link rel="prefetch" href="/assets/js/5.2c29a215.js"><link rel="prefetch" href="/assets/js/6.4ab43089.js"><link rel="prefetch" href="/assets/js/7.7b40a6bc.js"><link rel="prefetch" href="/assets/js/8.27f27a15.js"><link rel="prefetch" href="/assets/js/9.47203886.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8707b1dd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">å°å¤ªé˜³</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          æˆ‘çš„
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item ant-menu-item-selected"><a href="/blog/" class="router-link-active">
          ç¬”è®°
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/yh-Sun" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" title="ğŸ‘‹é¦–é¡µ" class="sidebar-link">ğŸ‘‹é¦–é¡µ</a></li><li><a href="/blog/Activiti.html" title="Activiti" class="sidebar-link">Activiti</a></li><li><a href="/blog/Powerdesigner.html" title="Powerdesigner" class="sidebar-link">Powerdesigner</a></li><li><a href="/blog/Vue.html" title="Vue" class="sidebar-link">Vue</a></li><li><a href="/blog/çŸ¥è¯†æ ˆ.html" title="çŸ¥è¯†æ ˆ" class="sidebar-link">çŸ¥è¯†æ ˆ</a></li><li><a href="/blog/Salt.html" title="Salt" class="sidebar-link">Salt</a></li><li><a href="/blog/Elasticsearch+Kibana.html" title="Elasticsearch Kibana" class="sidebar-link">Elasticsearch Kibana</a></li><li><a href="/blog/Grafana+Prometheus.html" title="Grafana Prometheus" class="sidebar-link">Grafana Prometheus</a></li><li><a href="/blog/Jdk.html" title="JDK" class="sidebar-link">JDK</a></li><li><a href="/blog/Jenkins.html" title="Jenkins" class="sidebar-link">Jenkins</a></li><li><a href="/blog/Mysql.html" aria-current="page" title="Mysql" class="active sidebar-link">Mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Mysql.html#mysqléƒ¨ç½²" title="mysqléƒ¨ç½²" class="sidebar-link">mysqléƒ¨ç½²</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Mysql.html#libaioå®‰è£…" title="libaioå®‰è£…" class="sidebar-link">libaioå®‰è£…</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#mysqlåŒ…çš„å®‰è£…" title="MySqlåŒ…çš„å®‰è£…" class="sidebar-link">MySqlåŒ…çš„å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#åˆå§‹åŒ–msql" title="åˆå§‹åŒ–msql" class="sidebar-link">åˆå§‹åŒ–msql</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#æŸ¥çœ‹åˆå§‹åŒ–çš„rootç”¨æˆ·å¯†ç " title="æŸ¥çœ‹åˆå§‹åŒ–çš„rootç”¨æˆ·å¯†ç " class="sidebar-link">æŸ¥çœ‹åˆå§‹åŒ–çš„rootç”¨æˆ·å¯†ç </a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä¿®æ”¹-var-lib-mysqlçš„æƒé™ä¸€è¾¹å¯åŠ¨mysql" title="ä¿®æ”¹/var/lib/mysqlçš„æƒé™ä¸€è¾¹å¯åŠ¨mysql" class="sidebar-link">ä¿®æ”¹/var/lib/mysqlçš„æƒé™ä¸€è¾¹å¯åŠ¨mysql</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#å¯åŠ¨mysql" title="å¯åŠ¨mysql" class="sidebar-link">å¯åŠ¨mysql</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä¿®æ”¹å¯†ç " title="ä¿®æ”¹å¯†ç " class="sidebar-link">ä¿®æ”¹å¯†ç </a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#æˆæƒbbw-b2bç”¨æˆ·æ‹¥æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œæƒé™" title="æˆæƒbbw_b2bç”¨æˆ·æ‹¥æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œæƒé™" class="sidebar-link">æˆæƒbbw_b2bç”¨æˆ·æ‹¥æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œæƒé™</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#åˆ›å»ºç”¨æˆ·" title="åˆ›å»ºç”¨æˆ·" class="sidebar-link">åˆ›å»ºç”¨æˆ·</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#è´¦å·å¯†ç " title="è´¦å·å¯†ç " class="sidebar-link">è´¦å·å¯†ç </a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#å¸è½½mysql" title="å¸è½½MySql" class="sidebar-link">å¸è½½MySql</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#mysqlérootç”¨æˆ·ç¦»çº¿å®‰è£…" title="Mysqlérootç”¨æˆ·ç¦»çº¿å®‰è£…" class="sidebar-link">Mysqlérootç”¨æˆ·ç¦»çº¿å®‰è£…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä¸‹è½½å®‰è£…åŒ…" title="ä¸‹è½½å®‰è£…åŒ…" class="sidebar-link">ä¸‹è½½å®‰è£…åŒ…</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#è§£å‹åŠç¼–å†™é…ç½®æ–‡ä»¶" title="è§£å‹åŠç¼–å†™é…ç½®æ–‡ä»¶" class="sidebar-link">è§£å‹åŠç¼–å†™é…ç½®æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#å®‰è£…mysql" title="å®‰è£…MySql" class="sidebar-link">å®‰è£…MySql</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#å¯åŠ¨mysql-2" title="å¯åŠ¨MySql" class="sidebar-link">å¯åŠ¨MySql</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ç™»å½•mysql" title="ç™»å½•MySql" class="sidebar-link">ç™»å½•MySql</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#è‡ªå·±çš„æƒ³æ³•" title="è‡ªå·±çš„æƒ³æ³•" class="sidebar-link">è‡ªå·±çš„æƒ³æ³•</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä¿å¸2ä¿é™©å¿«é€Ÿå‡ºå•-mysqlæ•°æ®åº“ä¸»ä»é…ç½®" title="ä¿å¸2ä¿é™©å¿«é€Ÿå‡ºå•-mysqlæ•°æ®åº“ä¸»ä»é…ç½®" class="sidebar-link">ä¿å¸2ä¿é™©å¿«é€Ÿå‡ºå•-mysqlæ•°æ®åº“ä¸»ä»é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä¸»ä»ç¯å¢ƒå‡†å¤‡" title="ä¸»ä»ç¯å¢ƒå‡†å¤‡ï¼š" class="sidebar-link">ä¸»ä»ç¯å¢ƒå‡†å¤‡ï¼š</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#é…ç½®" title="é…ç½®ï¼š" class="sidebar-link">é…ç½®ï¼š</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä½¿ç”¨" title="ä½¿ç”¨ï¼š" class="sidebar-link">ä½¿ç”¨ï¼š</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#é™„å½•" title="é™„å½•ï¼š" class="sidebar-link">é™„å½•ï¼š</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#shardingsphere-proxy" title="shardingsphere-proxy" class="sidebar-link">shardingsphere-proxy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä¸‹è½½sharding-proxy" title="ä¸‹è½½sharding-proxy" class="sidebar-link">ä¸‹è½½sharding-proxy</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä¸‹è½½mysqlè¿æ¥é©±åŠ¨" title="ä¸‹è½½mysqlè¿æ¥é©±åŠ¨" class="sidebar-link">ä¸‹è½½mysqlè¿æ¥é©±åŠ¨</a></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#ä½¿ç”¨-2" title="ä½¿ç”¨" class="sidebar-link">ä½¿ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Mysql.html#shardingsphere-jdbc" title="shardingsphere-jdbc" class="sidebar-link">shardingsphere-jdbc</a></li></ul></li><li><a href="/blog/Nacos.html" title="Nacos" class="sidebar-link">Nacos</a></li><li><a href="/blog/Nginx.html" title="Nginx" class="sidebar-link">Nginx</a></li><li><a href="/blog/Redis.html" title="Redis" class="sidebar-link">Redis</a></li><li><a href="/blog/RocketMq.html" title="RocketMq" class="sidebar-link">RocketMq</a></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="mysqléƒ¨ç½²"><a href="#mysqléƒ¨ç½²" class="header-anchor">#</a> mysqléƒ¨ç½²</h2> <h3 id="libaioå®‰è£…"><a href="#libaioå®‰è£…" class="header-anchor">#</a> libaioå®‰è£…</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo rpm <span class="token operator">-</span>ivh <span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">~</span><span class="token operator">/</span>mysql<span class="token operator">/</span>libaio libaio<span class="token operator">-</span><span class="token number">0.3</span><span class="token number">.107</span><span class="token operator">-</span><span class="token number">10.</span>el6<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm <span class="token operator">--</span>force <span class="token operator">--</span>nodeps
sudo rpm <span class="token operator">-</span>ivh  libaio<span class="token operator">-</span><span class="token number">0.3</span><span class="token number">.107</span><span class="token operator">-</span><span class="token number">10.</span>el6<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm <span class="token operator">--</span>force <span class="token operator">--</span>nodeps

# libaioå®‰è£…
<span class="token number">2</span> rpm <span class="token operator">-</span>ivh libaio<span class="token operator">-</span><span class="token number">0.3</span><span class="token number">.107</span><span class="token operator">-</span><span class="token number">10.</span>el6<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm
</code></pre></div><h3 id="mysqlåŒ…çš„å®‰è£…"><a href="#mysqlåŒ…çš„å®‰è£…" class="header-anchor">#</a> MySqlåŒ…çš„å®‰è£…</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>commonå®‰è£…
rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>community<span class="token operator">-</span>common<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.26</span><span class="token operator">-</span><span class="token number">1.</span>el7<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm
# libså®‰è£…
rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>community<span class="token operator">-</span>libs<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.26</span><span class="token operator">-</span><span class="token number">1.</span>el7<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm
# libs<span class="token operator">-</span>compatå®‰è£…
rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>community<span class="token operator">-</span>libs<span class="token operator">-</span>compat<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.26</span><span class="token operator">-</span><span class="token number">1.</span>el7<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm
# Clientå®‰è£…
rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>community<span class="token operator">-</span>client<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.26</span><span class="token operator">-</span><span class="token number">1.</span>el7<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm
# Serverå®‰è£…
rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>community<span class="token operator">-</span>server<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.26</span><span class="token operator">-</span><span class="token number">1.</span>el7<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm
# Develå®‰è£…
rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>community<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.26</span><span class="token operator">-</span><span class="token number">1.</span>el7<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm  
</code></pre></div><h3 id="åˆå§‹åŒ–msql"><a href="#åˆå§‹åŒ–msql" class="header-anchor">#</a> åˆå§‹åŒ–msql</h3> <div class="language-html extra-class"><pre class="language-html"><code>mysqld --initialize
mysqld --initialize  --lower-case-table-names=1

# 8ç‰ˆæœ¬åï¼Œä¸èƒ½åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>å¿½ç•¥å¤§å°å†™</span><span class="token punctuation">&gt;</span></span>ï¼Œä¸€ä¸ªæ–¹æ³•å°±æ˜¯åœ¨åˆå§‹åŒ–æ—¶ï¼Œç›´æ¥å¿½ç•¥ï¼›
https://www.cnblogs.com/niceyoo/p/11545196.html
    
vim /etc/my.conf
    # å¿½ç•¥ï¥¶â¼¤å¤§â¼©å°å†™
    lowerâ€”â€”case_table_name=1
    # sqlæ¨¡å¼å»æ‰ONLY_FULL_GROUP_BY
    sql-mode='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,
    NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'

è¯¦ç»†ï¼š
# æŸ¥çœ‹æ˜¯å¦å¿½ç•¥å¤§å°å†™
show Variables like '%table_names'

# å¿½ç•¥ï¥¶â¼¤å¤§â¼©å°å†™
lowerâ€”â€”case_table_name=1

# sqlæ¨¡å¼å»æ‰ONLY_FULL_GROUP_BY
sql-mode='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,
NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'
</code></pre></div><h3 id="æŸ¥çœ‹åˆå§‹åŒ–çš„rootç”¨æˆ·å¯†ç "><a href="#æŸ¥çœ‹åˆå§‹åŒ–çš„rootç”¨æˆ·å¯†ç " class="header-anchor">#</a> æŸ¥çœ‹åˆå§‹åŒ–çš„rootç”¨æˆ·å¯†ç </h3> <div class="language- extra-class"><pre class="language-text"><code>grep 'temporary password' /var/log/mysqld.log

2020-06-23T01:57:33.093785Z 1 [Note] A temporary password is generated for root@localhost: ChBya?ymX9*/
</code></pre></div><h3 id="ä¿®æ”¹-var-lib-mysqlçš„æƒé™ä¸€è¾¹å¯åŠ¨mysql"><a href="#ä¿®æ”¹-var-lib-mysqlçš„æƒé™ä¸€è¾¹å¯åŠ¨mysql" class="header-anchor">#</a> ä¿®æ”¹/var/lib/mysqlçš„æƒé™ä¸€è¾¹å¯åŠ¨mysql</h3> <div class="language- extra-class"><pre class="language-text"><code>chown mysql:mysql -R /var/lib/mysql
</code></pre></div><h3 id="å¯åŠ¨mysql"><a href="#å¯åŠ¨mysql" class="header-anchor">#</a> å¯åŠ¨mysql</h3> <div class="language- extra-class"><pre class="language-text"><code>systemctl start mysqld

æŸ¥çœ‹mysqlå¯åŠ¨çŠ¶æ€
systemctl status mysqld

è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable mysqld

é‡å¯mysql 
service mysqld restart
</code></pre></div><h3 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="header-anchor">#</a> ä¿®æ”¹å¯†ç </h3> <div class="language- extra-class"><pre class="language-text"><code>1.å¼€å§‹ä½¿ç”¨æ­¤ç§æ–¹å¼ï¼Œæ²¡æœ‰ç”Ÿæ•ˆï¼Œæ‰€ä»¥é‡‡ç”¨å…¶ä»–æ–¹æ³•ï¼š
mysqladmin -u root -p password [æ–°å¯†ç ]
	-&gt;ä¼šæç¤ºè¾“â¼Šå…¥æ—§å¯†ç ï¼Œè¾“â¼Šå…¥4.4æ‰“å°å‡ºçš„å¯†ç 
	
2.æ€è·¯ï¼š
# ä¿®æ”¹my.confï¼Œrootè·³è¿‡å¯†ç æ ¡éªŒç™»å½•ï¼›

# ç™»å½•æˆåŠŸåï¼Œä¿®æ”¹userè¡¨rootç”¨æˆ·çš„å¯†ç ï¼›
update user set authentication_string=password('root') where user='root' and host='localhost';

# é‡æ–°ä¿®æ”¹my.confï¼Œé‡æ–°åŠ å…¥å¯†ç éªŒè¯ï¼›
</code></pre></div><h3 id="æˆæƒbbw-b2bç”¨æˆ·æ‹¥æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œæƒé™"><a href="#æˆæƒbbw-b2bç”¨æˆ·æ‹¥æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œæƒé™" class="header-anchor">#</a> æˆæƒbbw_b2bç”¨æˆ·æ‹¥æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œæƒé™</h3> <div class="language- extra-class"><pre class="language-text"><code>ç”Ÿäº§ç¯å¢ƒ
grant all privileges on kscd_dev.* to kscd_dev@'%'  identified by 'Kscd_dev@123'; 
grant all privileges on kscd_prod.* to kscd_prod@'%'  identified by 'Kscd_prod@123'; 

åˆ·æ–°ç³»ç»Ÿæƒé™
flush privileges;
</code></pre></div><h3 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="header-anchor">#</a> åˆ›å»ºç”¨æˆ·</h3> <div class="language- extra-class"><pre class="language-text"><code>æŸ¥çœ‹å¤šå°‘æ•°æ®åº“
show databases;

åˆ›å»ºç”¨æˆ·ï¼š
CREATE USER 'kscd_dev'@'%' IDENTIFIED BY 'Kscd_dev@123';
CREATE USER 'kscd_prod'@'%' IDENTIFIED BY 'Kscd_prod@123';

åˆ›å»ºæ•°æ®åº“ï¼š
create database kscd_dev;

mysqlåˆ›å»ºæ•°æ®åº“å¹¶è®¾ç½®å­—ç¬¦é›†ç¼–ç 
create database `kscd_prod` character set utf8mb4 collate utf8mb4_general_ci;
</code></pre></div><h3 id="è´¦å·å¯†ç "><a href="#è´¦å·å¯†ç " class="header-anchor">#</a> è´¦å·å¯†ç </h3> <blockquote><p>rootè´¦å·å¯†ç ï¼šroot root</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>kscd_dev
Kscd_dev@123
CREATE USER 'kscd_dev'@'%' IDENTIFIED BY 'Kscd_dev@123';

kscd_dev
create database kscd_dev;
</code></pre></div><h3 id="å¸è½½mysql"><a href="#å¸è½½mysql" class="header-anchor">#</a> å¸è½½MySql</h3> <div class="language- extra-class"><pre class="language-text"><code>https://www.cnblogs.com/nicknailo/articles/8563456.html
rpm -qa|grep -i mysql

rpm -ev mysql-community-common-5.7.26-1.el7.x86_64 --nodeps
rpm -ev mysql-community-libs-compat-5.7.26-1.el7.x86_64 --nodeps
rpm -ev mysql-community-server-5.7.26-1.el7.x86_64 --nodeps
rpm -ev mysql-community-libs-5.7.26-1.el7.x86_64 --nodeps
rpm -ev mysql-community-client-5.7.26-1.el7.x86_64 --nodeps
rpm -ev mysql-community-devel-5.7.26-1.el7.x86_64 --nodeps
</code></pre></div><h2 id="mysqlérootç”¨æˆ·ç¦»çº¿å®‰è£…"><a href="#mysqlérootç”¨æˆ·ç¦»çº¿å®‰è£…" class="header-anchor">#</a> Mysqlérootç”¨æˆ·ç¦»çº¿å®‰è£…</h2> <blockquote><p>Linuxérootç”¨æˆ·å®‰è£…åŠé…ç½®MySqlï¼Œæ‘˜æŠ„è‡³ï¼šhttps://cloud.tencent.com/developer/article/1583129</p></blockquote> <ul><li>ä¸€ã€ä¸‹è½½å®‰è£…åŒ…</li> <li>äºŒã€è§£å‹åŠç¼–å†™é…ç½®æ–‡ä»¶
<ul><li>1ã€è§£å‹æ–‡ä»¶</li> <li>2ã€ç¼–å†™é…ç½®æ–‡ä»¶</li></ul></li> <li>ä¸‰ã€å®‰è£…MySql</li> <li>å››ã€å¯åŠ¨MySql</li> <li>äº”ã€ç™»å½•MySql
<ul><li>1ã€è·å–rootç”¨æˆ·å¯†ç </li> <li>2ã€ç™»å½•MySql æŸ¥çœ‹æŠ¥é”™</li> <li>3ã€å¢åŠ sockè·¯å¾„è¿›è¡Œå¯åŠ¨</li> <li>4ã€ä¿®æ”¹åˆå§‹å¯†ç </li> <li>5ã€æŸ¥çœ‹MySqlè¿›ç¨‹çŠ¶æ€</li></ul></li> <li>å…­ã€å‚è€ƒæ–‡çŒ®</li> <li>ä¸ƒã€ç¦»çº¿å®‰è£…åŒ…</li></ul> <h3 id="ä¸‹è½½å®‰è£…åŒ…"><a href="#ä¸‹è½½å®‰è£…åŒ…" class="header-anchor">#</a> ä¸‹è½½å®‰è£…åŒ…</h3> <p>é•œåƒç«™ç½‘å€ï¼ˆæåŠ›æ¨èï¼Œä¸‹è½½é€Ÿåº¦è´¼å¿«ï¼‰ï¼š<code>http://mirrors.ustc.edu.cn/</code></p> <p>æˆ‘ç”¨çš„ç»é•œåƒç«™ï¼š<code>http://mirrors.ustc.edu.cn/mysql-ftp/Downloads/MySQL-5.7/</code> é€‰ç”¨ç‰ˆæœ¬ä¸ºï¼š<code>mysql-5.7.29-linux-glibc2.12-x86_64.tar.gz</code>ï¼ˆæ–‡ç« æ—¶é—´æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼‰</p> <p>å®‰è£…åŒ…ä¸‹è½½è¿‡ç¨‹éå¸¸ç®€å•ã€‚ä¸Šä¼ åˆ°æœåŠ¡å™¨å†…ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œè¿™é‡Œå°±ä¸ç»†å†™äº†ï¼</p> <h3 id="è§£å‹åŠç¼–å†™é…ç½®æ–‡ä»¶"><a href="#è§£å‹åŠç¼–å†™é…ç½®æ–‡ä»¶" class="header-anchor">#</a> è§£å‹åŠç¼–å†™é…ç½®æ–‡ä»¶</h3> <h4 id="è§£å‹æ–‡ä»¶"><a href="#è§£å‹æ–‡ä»¶" class="header-anchor">#</a> è§£å‹æ–‡ä»¶</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>tar <span class="token operator">-</span>zxvf mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.29</span><span class="token operator">-</span>linux<span class="token operator">-</span>glibc2<span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">-</span>x86_64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
mv mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.29</span><span class="token operator">-</span>linux<span class="token operator">-</span>glibc2<span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">-</span>x86_64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz mysql
cd mysql
</code></pre></div><p>ä»¥ä¸Šä¸‰æ¡å‘½ä»¤ï¼ŒæŒ‰ç…§é¡ºåºä¾æ¬¡æ‰§è¡Œå³å¯ã€‚ï¼ˆåé¢çš„æ–‡ä»¶åï¼Œæ ¹æ®å®æ—¶çš„ä¸‹è½½ï¼Œè‡ªè¡Œæ›¿æ¢ï¼‰</p> <h4 id="ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#ç¼–å†™é…ç½®æ–‡ä»¶" class="header-anchor">#</a> ç¼–å†™é…ç½®æ–‡ä»¶</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>vim my<span class="token punctuation">.</span>cnf
</code></pre></div><p>å°†å¦‚ä¸‹ä»£ç ç›´æ¥å¤åˆ¶è¿›å»ã€‚ è¯´æ˜ï¼šoperä¸º ç”¨æˆ·åç§°  mysql æ˜¯ä¸Šä¸€æ­¥æˆ‘ä»¬mvé‡å‘½åçš„æ–‡ä»¶å</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span>client<span class="token punctuation">]</span>   
port<span class="token operator">=</span><span class="token number">3336</span>  
socket<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock  

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
port<span class="token operator">=</span><span class="token number">3336</span>
basedir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql
datadir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>data
pid<span class="token operator">-</span>file<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>pid
socket<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
log_error<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>error<span class="token punctuation">.</span>log
server<span class="token operator">-</span>id<span class="token operator">=</span><span class="token number">100</span>
</code></pre></div><h3 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="header-anchor">#</a> å®‰è£…MySql</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>bin<span class="token operator">/</span>mysqld \
<span class="token operator">--</span>defaults<span class="token operator">-</span>file<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>kscd<span class="token operator">/</span>mysql<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf \
<span class="token operator">--</span>initialize \
<span class="token operator">--</span>user<span class="token operator">=</span>kscd \
<span class="token operator">--</span>basedir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>kscd<span class="token operator">/</span>mysql \
<span class="token operator">--</span>datadir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>kscd<span class="token operator">/</span>mysql<span class="token operator">/</span>data
</code></pre></div><p>ä»¥ä¸Šå‘½ä»¤ï¼ŒæŒ¨è¡Œä¾æ¬¡å¤åˆ¶ï¼Œç„¶åæŒ‰å›è½¦ï¼Œè¾“å…¥å®Œæœ€åä¸€è¡Œå›è½¦ã€‚å¦‚æœæˆåŠŸæ— ä»»ä½•è¿”å›ç»“æœï¼Œå¦‚å‡ºç°ä»»ä½•è¿”å›ç»“æœå³ä¸ºå¤±è´¥ã€‚</p> <h3 id="å¯åŠ¨mysql-2"><a href="#å¯åŠ¨mysql-2" class="header-anchor">#</a> å¯åŠ¨MySql</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>bin<span class="token operator">/</span>mysqld_safe <span class="token operator">--</span>defaults<span class="token operator">-</span>file<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>kscd<span class="token operator">/</span>mysql<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">--</span>user<span class="token operator">=</span>root <span class="token operator">&amp;</span>

bin<span class="token operator">/</span>mysqld_safe <span class="token operator">--</span>defaults<span class="token operator">-</span>file<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">etc</span><span class="token regex-delimiter">/</span><span class="token regex-flags">my</span></span><span class="token punctuation">.</span>cnf <span class="token operator">--</span>user<span class="token operator">=</span>root <span class="token operator">&amp;</span>
</code></pre></div><p>è¿™é‡Œæ˜¯å¯ä»¥æˆåŠŸæ‰§è¡Œçš„ã€‚ç»§ç»­ä¸‹ä¸€æ­¥ã€‚</p> <h3 id="ç™»å½•mysql"><a href="#ç™»å½•mysql" class="header-anchor">#</a> ç™»å½•MySql</h3> <h4 id="è·å–rootç”¨æˆ·å¯†ç "><a href="#è·å–rootç”¨æˆ·å¯†ç " class="header-anchor">#</a> è·å–rootç”¨æˆ·å¯†ç </h4> <p>åˆå§‹å¯†ç åœ¨error.logæ–‡ä»¶ä¸­ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>cat error<span class="token punctuation">.</span>log <span class="token operator">|</span> grep root@localhost
</code></pre></div><h4 id="ç™»å½•mysql-æŸ¥çœ‹æŠ¥é”™"><a href="#ç™»å½•mysql-æŸ¥çœ‹æŠ¥é”™" class="header-anchor">#</a> ç™»å½•MySql æŸ¥çœ‹æŠ¥é”™</h4> <p>è¿™é‡Œå› ä¸ºæ˜¯éoperç”¨æˆ·ï¼Œæ‰€ä»¥æ­£å¸¸ç™»å½•å‘½ä»¤åº”è¯¥æ˜¯ï¼š<code>bin/mysql -u root -p</code>ï¼Œä½†æ˜¯å³ä½¿ä½ è¿™æ ·è¾“å…¥äº†ï¼Œä¸€æ ·æŠ¥é”™ã€‚ä¼šç»™ä½ æŠ¥å¦‚ä¸‹é”™è¯¯ä»£ç ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">ERROR</span> <span class="token number">2002</span> <span class="token punctuation">(</span><span class="token constant">HY000</span><span class="token punctuation">)</span><span class="token operator">:</span> Can<span class="token string">'t connect to local MySQL server through socket '</span><span class="token operator">/</span>tmp<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock' <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="å¢åŠ sockè·¯å¾„è¿›è¡Œå¯åŠ¨"><a href="#å¢åŠ sockè·¯å¾„è¿›è¡Œå¯åŠ¨" class="header-anchor">#</a> å¢åŠ sockè·¯å¾„è¿›è¡Œå¯åŠ¨</h4> <p>æ‰€ä»¥ç›´æ¥åŠ sockçš„å¯åŠ¨å‘½ä»¤ï¼š(æœ‰ç‚¹ç¬¨é‡ï¼Œä½†æ˜¯èƒ½å®ç°)ï¼ˆæ›´å¥½çš„åŠæ³•æˆ‘ä¹Ÿæ²¡æ‰¾åˆ°ï¼‰</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>bin<span class="token operator">/</span>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p <span class="token operator">-</span><span class="token constant">S</span> <span class="token operator">/</span>home<span class="token operator">/</span>kscd<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
</code></pre></div><h4 id="ä¿®æ”¹åˆå§‹å¯†ç "><a href="#ä¿®æ”¹åˆå§‹å¯†ç " class="header-anchor">#</a> ä¿®æ”¹åˆå§‹å¯†ç </h4> <p>ç™»å½•æˆåŠŸä¹‹åï¼Œè¿›è¡Œåˆå§‹å¯†ç çš„ä¿®æ”¹</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">SET</span> <span class="token constant">PASSWORD</span> <span class="token constant">FOR</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> <span class="token operator">=</span> <span class="token constant">PASSWORD</span><span class="token punctuation">(</span><span class="token string">'oper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>mysql -uroot -p
mysql<span class="token operator">&gt;</span> SET PASSWORD FOR <span class="token string">'root'</span>@<span class="token string">'localhost'</span> <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">'%'</span> where user <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span>  flush privileges<span class="token punctuation">;</span>
</code></pre></div><h4 id="æŸ¥çœ‹mysqlè¿›ç¨‹çŠ¶æ€"><a href="#æŸ¥çœ‹mysqlè¿›ç¨‹çŠ¶æ€" class="header-anchor">#</a> æŸ¥çœ‹MySqlè¿›ç¨‹çŠ¶æ€</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>ps <span class="token operator">-</span>ef<span class="token operator">|</span>grep mysql
</code></pre></div><p>è¾“å…¥å¦‚ä¸Šå‘½ä»¤ï¼Œå³å¯æŸ¥çœ‹åˆ°MySqlçš„è¿›ç¨‹çŠ¶æ€ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>oper       <span class="token number">8133</span>   <span class="token number">7553</span>  <span class="token number">0</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">24</span> pts<span class="token operator">/</span><span class="token number">0</span>    <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> <span class="token operator">/</span>bin<span class="token operator">/</span>sh bin<span class="token operator">/</span>mysqld_safe <span class="token operator">--</span>defaults<span class="token operator">-</span>file<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>opermysql<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">--</span>user<span class="token operator">=</span>oper
oper       <span class="token number">8298</span>   <span class="token number">8133</span>  <span class="token number">0</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">24</span> pts<span class="token operator">/</span><span class="token number">0</span>    <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> <span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysqld <span class="token operator">--</span>defaults<span class="token operator">-</span>file<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">--</span>basedir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql <span class="token operator">--</span>datadir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>data <span class="token operator">--</span>plugin<span class="token operator">-</span>dir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>lib<span class="token operator">/</span>plugin <span class="token operator">--</span>log<span class="token operator">-</span>error<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>error<span class="token punctuation">.</span>log <span class="token operator">--</span>pid<span class="token operator">-</span>file<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>pid <span class="token operator">--</span>socket<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oper<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock <span class="token operator">--</span>port<span class="token operator">=</span><span class="token number">3336</span>
oper       <span class="token number">9138</span>   <span class="token number">8343</span>  <span class="token number">0</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">39</span> pts<span class="token operator">/</span><span class="token number">1</span>    <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> grep <span class="token operator">--</span>color<span class="token operator">=</span>auto mysql
</code></pre></div><h3 id="è‡ªå·±çš„æƒ³æ³•"><a href="#è‡ªå·±çš„æƒ³æ³•" class="header-anchor">#</a> è‡ªå·±çš„æƒ³æ³•</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>sun@localhost mysql<span class="token punctuation">]</span>$ bin/mysqld --defaults-file<span class="token operator">=</span>/home/sun/mysql/my.cnf --initialize --user<span class="token operator">=</span>sun --basedir<span class="token operator">=</span>/home/sun/mysql --datadir<span class="token operator">=</span>/home/sun/mysql/data

<span class="token punctuation">[</span>sun@localhost mysql<span class="token punctuation">]</span>$ bin/mysqld_safe --defaults-file<span class="token operator">=</span>/home/sun/mysql/my.cnf --user<span class="token operator">=</span>sun <span class="token operator">&amp;</span>
</code></pre></div><h4 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="header-anchor">#</a> ç¯å¢ƒå˜é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> ~/.bash_profile

<span class="token assign-left variable">MYSQL_HOME</span><span class="token operator">=</span>/home/sun/mysql
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token environment constant">$HOME</span>/.local/bin:<span class="token environment constant">$HOME</span>/bin:<span class="token variable">$MYSQL_HOME</span>/bin
<span class="token builtin class-name">export</span> <span class="token environment constant">PATH</span>

<span class="token builtin class-name">source</span> ~/.bash_profile
</code></pre></div><h4 id="åˆ›å»ºè½¯å¼•ç”¨è§£å†³"><a href="#åˆ›å»ºè½¯å¼•ç”¨è§£å†³" class="header-anchor">#</a> åˆ›å»ºè½¯å¼•ç”¨è§£å†³ï¼š</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># åˆ›å»ºå‰ï¼šæŠ¥é”™ï¼Œå¿…é¡»åˆ¶å®š å¯¹åº”çš„sockåœ°å€ï¼šmysql -uroot -p -S /home/sun/mysql/mysql.sock</span>
<span class="token punctuation">[</span>sun@localhost ~<span class="token punctuation">]</span>$ mysql -uroot -p
Enter password: 
ERROR <span class="token number">2002</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Can<span class="token string">'t connect to local MySQL server through socket '</span>/tmp/mysql.sock' <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># åˆ›å»ºè½¯å¼•ç”¨</span>
<span class="token punctuation">[</span>sun@localhost ~<span class="token punctuation">]</span>$ <span class="token function">ln</span> -s /home/sun/mysql/mysql.sock /tmp
								  <span class="token function">ln</span> -s /home/kscd/mysql/mysql.sock /tmp

<span class="token comment"># å¯ç›´æ¥ç™»å½•</span>
<span class="token punctuation">[</span>sun@localhost ~<span class="token punctuation">]</span>$ mysql -uroot -p
Enter password: 
<span class="token operator">&gt;</span> mysql:
</code></pre></div><h4 id="æ•°æ®åº“åˆ›å»ºç”¨æˆ·"><a href="#æ•°æ®åº“åˆ›å»ºç”¨æˆ·" class="header-anchor">#</a> æ•°æ®åº“åˆ›å»ºç”¨æˆ·ï¼š</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>åˆ›å»ºæ•°æ®åº“ï¼š
create database ts_kscd_dev<span class="token punctuation">;</span>
create database nacos_prod<span class="token punctuation">;</span>

åˆ›å»ºç”¨æˆ·
CREATE <span class="token environment constant">USER</span> <span class="token string">'kscd_dev'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'Kscd_dev@123'</span><span class="token punctuation">;</span>

ä¸ºç”¨æˆ·èµ‹äºˆts_kscd_devæƒé™
grant all privileges on ts_kscd_dev.* to kscd_dev@<span class="token string">'%'</span>  identified by <span class="token string">'Kscd_dev@123'</span><span class="token punctuation">;</span> 
grant all privileges on nacos_prod.* to kscd_prod@<span class="token string">'%'</span>  identified by <span class="token string">'Kscd_prod@123'</span><span class="token punctuation">;</span> 

åˆ·æ–°ç³»ç»Ÿæƒé™
flush privileges<span class="token punctuation">;</span>
</code></pre></div><h2 id="ä¿å¸2ä¿é™©å¿«é€Ÿå‡ºå•-mysqlæ•°æ®åº“ä¸»ä»é…ç½®"><a href="#ä¿å¸2ä¿é™©å¿«é€Ÿå‡ºå•-mysqlæ•°æ®åº“ä¸»ä»é…ç½®" class="header-anchor">#</a> ä¿å¸2ä¿é™©å¿«é€Ÿå‡ºå•-mysqlæ•°æ®åº“ä¸»ä»é…ç½®</h2> <h3 id="ä¸»ä»ç¯å¢ƒå‡†å¤‡"><a href="#ä¸»ä»ç¯å¢ƒå‡†å¤‡" class="header-anchor">#</a> ä¸»ä»ç¯å¢ƒå‡†å¤‡ï¼š</h3> <table><thead><tr><th>åç§°</th> <th>IP</th> <th>æœåŠ¡å™¨è´¦å·</th> <th>æ•°æ®åº“è´¦å·</th></tr></thead> <tbody><tr><td>msyql-masterï¼ˆä¸»åº“ï¼‰</td> <td>10.10.10.1</td> <td>root/root</td> <td>root/@mima18<br>kscd/mima2018@</td></tr> <tr><td>mysql-slaveï¼ˆä»åº“ï¼‰</td> <td>10.10.10.2</td> <td>root/root</td> <td>root/@mima18</td></tr></tbody></table> <blockquote><p><strong>kscdï¼šåº”ç”¨å±‚ä½¿ç”¨çš„æ•°æ®åº“è´¦å·</strong></p></blockquote> <h3 id="é…ç½®"><a href="#é…ç½®" class="header-anchor">#</a> é…ç½®ï¼š</h3> <p><strong>ï¼ˆ1ï¼‰é…ç½®ä¸»åº“</strong></p> <ul><li>ä¿®æ”¹my.cnfæ–‡ä»¶ï¼š</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@ecs-afea ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/my.cnf</span>
 
 <span class="token comment"># æœåŠ¡çš„å”¯ä¸€ç¼–å·</span>
 server-id<span class="token operator">=</span><span class="token number">1</span>
 
 <span class="token comment"># å¼€å¯mysql binlogåŠŸèƒ½</span>
 log-bin<span class="token operator">=</span>mysql-bin
 
 <span class="token comment"># binlogè®°å½•å†…å®¹çš„æ–¹å¼ï¼Œè®°å½•è¢«æ“ä½œçš„æ¯ä¸€è¡Œ</span>
 <span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>ROW
 
 <span class="token comment"># å‡å°‘è®°å½•æ—¥å¿—çš„å†…å®¹ï¼Œåªè®°å½•å—å½±å“çš„åˆ—</span>
 <span class="token assign-left variable">binlog_row_image</span><span class="token operator">=</span>minimal
 
 <span class="token comment"># æŒ‡å®šéœ€è¦å¤åˆ¶çš„æ•°æ®åº“åä¸ºts_kscd_devï¼Œå¦‚æœå¤åˆ¶å¤šä¸ªæ•°æ®åº“ï¼Œåˆ™å¦èµ·ä¸€è¡Œå†é…ç½®ä¸€ä¸ªbinlog-do-db</span>
 binlog-do-db<span class="token operator">=</span>ts_kscd_dev
 
 <span class="token comment"># slave_skip_errorsé€‰é¡¹æœ‰å››ä¸ªå¯ç”¨å€¼ï¼Œåˆ†åˆ«ä¸ºï¼šoffï¼Œallï¼ŒErorCodeï¼Œddl_exist_errorsï¼›</span>
 <span class="token comment"># ä¿å¸1çº¿ä¸Šé…ç½®çš„æ˜¯ddl_exist_errorsï¼Œæ­¤æ¬¡æˆ‘ä»¬é…ç½®allï¼Œæ›´å¤šè§ã€é™„å½•1ã€‘</span>
 slave_skip_errors <span class="token operator">=</span> all
</code></pre></div><ul><li>ä¿®æ”¹å¥½é…ç½®æ–‡ä»¶ï¼Œé‡å¯mysqlæœåŠ¡</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</span>
<span class="token number">1</span>.service mysqld restart
<span class="token number">2</span>.systemctl restart mysqld
</code></pre></div><p>**æ³¨æ„ï¼š**ä¸‹é¢å‘½ä»¤æ˜¯åœ¨mysqlçš„ç»ˆç«¯æ‰§è¡Œçš„ã€‚</p> <ul><li>åˆ›å»ºä»åº“åŒæ­¥æ•°æ®çš„è´¦å·</li></ul> <div class="language-mysql extra-class"><pre class="language-text"><code># åœ¨ä¸»æœåŠ¡å™¨ç»™æŸä¸€ç”¨æˆ·èµ‹äºˆslaveæƒé™ï¼Œå¯ä»¥æ˜¯javaåº”ç”¨é‡‡ç”¨çš„ç”¨æˆ·ï¼›å¹¶æ›¿æ¢æˆä»æœåŠ¡å™¨çš„IPå³å¯ã€‚
mysql&gt; grant replication slave on *.* to 'kscd'@'10.1.10.100' identified by 'mima2018@';

grant replication slave on *.* to 'kscd_prod'@'10.1.10.101' identified by 'Kscd_prod@123';
</code></pre></div><blockquote><p>æŸ¥çœ‹ä¸»åº“çš„çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºä¸»åº“é…ç½®å®Œæˆ</p></blockquote> <div class="language-mysql extra-class"><pre class="language-text"><code>mysql&gt; show master status\G
*************************** 1. row ***************************
             File: mysql-bin.000003
         Position: 138430
     Binlog_Do_DB: ts_kscd_dev
 Binlog_Ignore_DB: 
Executed_Gtid_Set: 
1 row in set (0.00 sec)
</code></pre></div><p><strong>ï¼ˆ2ï¼‰é…ç½®ä»åº“</strong></p> <ul><li>ä¿®æ”¹my.cnfæ–‡ä»¶ï¼š</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># æœåŠ¡çš„å”¯ä¸€ç¼–å·ï¼Œä¸»ä»ç¼–å·ä¸èƒ½ç›¸åŒ</span>
server-id<span class="token operator">=</span><span class="token number">2</span>

<span class="token comment">## å‰©ä½™é…ç½®åŒã€ä¸»ã€‘</span>
</code></pre></div><ul><li>ä¿®æ”¹å¥½é…ç½®æ–‡ä»¶ï¼Œé‡å¯mysqlæœåŠ¡</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</span>
<span class="token number">1</span>.service mysqld restart
<span class="token number">2</span>.systemctl restart mysqld
</code></pre></div><p>**æ³¨æ„ï¼š**ä¸‹é¢å‘½ä»¤æ˜¯åœ¨mysqlçš„ç»ˆç«¯æ‰§è¡Œçš„ã€‚</p> <ul><li>æ‰§è¡ŒåŒæ­¥å‘½ä»¤ï¼š</li></ul> <div class="language-mysql extra-class"><pre class="language-text"><code># è®¾ç½®ä¸»æœåŠ¡å™¨ipï¼ŒåŒæ­¥è´¦å·å¯†ç ï¼ŒåŒæ­¥ä½ç½®
mysql&gt; change master to master_host='10.1.1.200',master_user='kscd',master_password='mima2018@',master_log_file='mysql-bin.000004',master_log_pos=27318;

change master to master_host='10.1.1.201',master_user='kscd_dev',master_password='Kscd_dev@123',master_log_file='mysql-bin.000003',master_log_pos=900474829;

change master to master_host='10.1.1.202',master_user='kscd',master_password='mima2018@',master_log_file='mysql-bin.000003',master_log_pos=900474829;

# å¼€å¯åŒæ­¥åŠŸèƒ½
mysql&gt; start slave;

# å…³é—­
mysql&gt; stop slave;
</code></pre></div><blockquote><p>æŸ¥çœ‹ä»åº“çš„çŠ¶æ€</p></blockquote> <div class="language-mysql extra-class"><pre class="language-text"><code>mysql&gt; show slave status\G
*************************** 1. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: 10.10.10.1
                  Master_User: kscd
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000003
          Read_Master_Log_Pos: 138430
               Relay_Log_File: VM_0_16_centos-relay-bin.000009
                Relay_Log_Pos: 138643
        Relay_Master_Log_File: mysql-bin.000003
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB: 
          Replicate_Ignore_DB: 
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 0
                   Last_Error: 
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 138430
              Relay_Log_Space: 139025
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 0
               Last_SQL_Error: 
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 1
                  Master_UUID: 58ee127b-bb73-11ea-ba28-fa163e70bf10
             Master_Info_File: /var/lib/mysql/master.info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates
           Master_Retry_Count: 86400
                  Master_Bind: 
      Last_IO_Error_Timestamp: 
     Last_SQL_Error_Timestamp: 
               Master_SSL_Crl: 
           Master_SSL_Crlpath: 
           Retrieved_Gtid_Set: 
            Executed_Gtid_Set: fa2b2c8a-e4b4-11e8-9827-525400caee62:1-5124366
                Auto_Position: 0
         Replicate_Rewrite_DB: 
                 Channel_Name: 
           Master_TLS_Version: 
1 row in set (0.00 sec)

</code></pre></div><p><img src="https://yh-sun.github.io/note-cloud/1602729031800.png" alt="enter description here"></p> <p>**æ³¨æ„ï¼š**Slave_IO_Runningå’ŒSlave_SQL_Runningçš„çŠ¶æ€éƒ½ä¸ºYesæ—¶ï¼Œè¯´æ˜ä»åº“é…ç½®æˆåŠŸã€‚</p> <h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="header-anchor">#</a> ä½¿ç”¨ï¼š</h3> <div class="language-mysql extra-class"><pre class="language-text"><code># ä½¿ç”¨kscdè´¦å·ç™»å½•mysql
mysql -ukscd -p******

# åˆ‡æ¢åˆ°é…ç½®ä¸»åŠ¨çš„åº“
mysql&gt; use ts_kscd_dev;

mysql&gt; #å°½æƒ…çš„å¢åˆ æ”¹å§ã€‚
</code></pre></div><h3 id="é™„å½•"><a href="#é™„å½•" class="header-anchor">#</a> é™„å½•ï¼š</h3> <h4 id="slave-skip-errors"><a href="#slave-skip-errors" class="header-anchor">#</a> slave_skip_errors</h4> <ul><li>ddl_exist_errorsæ˜¯MySql5.6å¢åŠ çš„å‚æ•°ï¼Œæ›´é€‚åˆå®é™…çš„åº”ç”¨</li> <li>å¦‚ä¸‹çš„è¿™äº›ç å€¼ï¼Œåœ¨ä»åº“ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šshow slave status\G;
<ul><li>Last_Errno: 1062</li> <li>Last_Error: Error 'Duplicate entry '3' for key '<strong>PRIMARY</strong>'' <strong>on</strong> query. <strong>Default</strong> <strong>database</strong>: 'test'. Query: 'insert into replication values (3, 'test3')'</li> <li>å¦‚æœæˆ‘ä»¬åœ¨my.cnfä¸­åŠ å…¥[slave_skip_errors=1062 ]ï¼Œåˆ™å¯è·³è¿‡æ­¤é”™è¯¯ï¼Œæ•°æ®åŒæ­¥ç»§ç»­è¿›è¡Œã€‚</li></ul></li></ul> <p><img src="https://yh-sun.github.io/note-cloud/1602729147519.png" alt="enter description here"></p> <ul><li>å¿…é¡»æ³¨æ„çš„æ˜¯ï¼Œå¯åŠ¨è¿™ä¸ªå‚æ•°ï¼Œå¦‚æœå¤„ç†ä¸å½“ï¼Œå¾ˆå¯èƒ½é€ æˆä¸»ä»æ•°æ®åº“çš„æ•°æ®ä¸åŒæ­¥ï¼Œåœ¨åº”ç”¨ä¸­éœ€è¦æ ¹æ®å®é™…æƒ…å†µï¼Œå¦‚æœå¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚ä¸æ˜¯å¾ˆä¸¥æ ¼ï¼Œé‚£ä¹ˆè¿™ä¸ªé€‰é¡¹ç¡®å®å¯ä»¥å‡è½»ç»´æŠ¤çš„æˆæœ¬</li></ul> <h4 id="åˆæ¬¡è®¾ç½®ä¸»ä»çš„æ•°æ®åŒæ­¥"><a href="#åˆæ¬¡è®¾ç½®ä¸»ä»çš„æ•°æ®åŒæ­¥" class="header-anchor">#</a> åˆæ¬¡è®¾ç½®ä¸»ä»çš„æ•°æ®åŒæ­¥</h4> <blockquote><p>åˆæ¬¡ä½¿ç”¨ï¼šä¸»åº“=&gt;ä»åº“</p></blockquote> <div class="language-mysql extra-class"><pre class="language-text"><code># 1.ä¸»æœåŠ¡å™¨ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤é”å®šæ•°æ®åº“ä»¥é˜²æ­¢å†™å…¥æ•°æ®
mysql&gt; FLUSH TABLES WITH READ LOCK;

# é€€å‡ºmysqlå‘½ä»¤è¡Œï¼Œå¯¼å‡ºæ•°æ®åº“
mysqldump -u root -p123456 --all-databases  --lock-tables=false  -- &gt; /root/all.sql
# å¯¼å‡ºæŸäº›åº“
mysqldump -uusername -ppassword --databases db1 db2 &gt; db1db2.sql
# å¯¼å‡ºæŸäº›åº“çš„è¡¨
mysqldump -uroot -p  ts_kscd_uat order_vehicle &gt; /home/kscd/uat_order_vehicle.sql

# ä½¿ç”¨scpå‘½ä»¤ä¼ è¾“æ•°æ®åº“æ–‡ä»¶all.sqlåˆ°ä»æœåŠ¡å™¨
scp /root/all.sql root@www.example.com:/root

# è§£é”æ•°æ®è¡¨
mysql&gt; UNLOCK TABLES;


# 2.ä»æœåŠ¡å™¨ï¼šå¯¼å…¥ä¸»æœåŠ¡å™¨çš„æ•°æ®åº“,viä¸€ä¸‹è¿™ä¸ªsqlï¼Œuse ts_kscd_dev
mysql -u root -p123456 &lt; /root/all.sql
</code></pre></div><h5 id="åŒæ­¥æ•°æ®"><a href="#åŒæ­¥æ•°æ®" class="header-anchor">#</a> åŒæ­¥æ•°æ®ï¼š</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>åŒæ­¥æ•°æ®ï¼š
<span class="token punctuation">[</span>root@ecs-c6-xlarge-4-linux-20200825085913 home<span class="token punctuation">]</span><span class="token comment"># mysqldump -uroot -p --databases ts_kscd_dev &gt; /home/ts_kscd_dev.sql    </span>
Enter password: 
<span class="token punctuation">[</span>root@ecs-c6-xlarge-4-linux-20200825085913 home<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">288280</span>
drwxr-xr-x  <span class="token number">3</span> root root      <span class="token number">4096</span> Sep <span class="token number">12</span> <span class="token number">15</span>:54 app_store
drwxr-xr-x <span class="token number">10</span> root root      <span class="token number">4096</span> Sep <span class="token number">14</span> <span class="token number">10</span>:58 mysql
-rw-r--r--  <span class="token number">1</span> root root <span class="token number">295186794</span> Sep <span class="token number">14</span> <span class="token number">12</span>:05 ts_kscd_dev.sql
</code></pre></div><h4 id="expire-logs-days"><a href="#expire-logs-days" class="header-anchor">#</a> expire_logs_days</h4> <div class="language-c++ extra-class"><pre class="language-text"><code>MySQL bin-logç›¸å…³å‚æ•°ï¼šexpire_logs_days
å‚æ•°ï¼šexpire_logs_days
è¯´æ˜ï¼šäºŒè¿›åˆ¶æ—¥å¿—è‡ªåŠ¨åˆ é™¤/è¿‡æœŸçš„å¤©æ•°ã€‚é»˜è®¤å€¼ä¸º0,è¡¨ç¤ºâ€œæ²¡æœ‰è‡ªåŠ¨åˆ é™¤â€
ä¾‹å¦‚ï¼šexpire_logs_days = 5 //è¡¨ç¤ºæ—¥å¿—ä¿ç•™5å¤©,è¶…è¿‡5å¤©åˆ™è®¾ç½®ä¸ºè¿‡æœŸçš„

PSï¼šå…³äºè¿‡æœŸæ—¥å¿—è‡ªåŠ¨åˆ é™¤è¡¥å……ï¼š
Qï¼šåœ¨ä»€ä¹ˆæ—¶é—´ä¼šåˆ é™¤è¿‡æœŸæ—¥å¿—ï¼Ÿ
Aï¼šæ¯æ¬¡è¿›è¡Œ LOG flushçš„æ—¶ä¼šè‡ªåŠ¨åˆ é™¤è¿‡æœŸçš„æ—¥å¿—ã€‚

Qï¼šä»€ä¹ˆæ—¶é—´æ‰èƒ½è§¦å‘log flushï¼Œæ‰‹å†Œä¸Šçš„è§£é‡Šä¸ºï¼š
Aï¼š1. é‡å¯ï¼›
ã€€   2. BINLOGæ–‡ä»¶å¤§å°è¾¾åˆ°å‚æ•°max_binlog_sizeé™åˆ¶ï¼›
ã€€   3. æ‰‹å·¥æ‰§è¡Œå‘½ä»¤ã€‚
</code></pre></div><h4 id="binlog-rows-query-log-events"><a href="#binlog-rows-query-log-events" class="header-anchor">#</a> binlog_rows_query_log_events</h4> <div class="language-html extra-class"><pre class="language-html"><code>binlog_rows_query_log_events = 1
åœ¨rowæ¨¡å¼ä¸‹å¼€å¯è¯¥å‚æ•°,å°†æŠŠsqlè¯­å¥æ‰“å°åˆ°binlogæ—¥å¿—é‡Œé¢.é»˜è®¤æ˜¯0(off);

è¯¦ï¼šhttps://www.cnblogs.com/olinux/p/6755193.html
</code></pre></div><p><img src="https://yh-sun.github.io/note-cloud/1602729184127.png" alt="enter description here"></p> <h4 id="log-slave-updates"><a href="#log-slave-updates" class="header-anchor">#</a> log-slave-updates</h4> <blockquote><p>è¿™ä¸ªå‚æ•°ï¼Œç›®å‰æ²¡æœ‰é…ç½®ï¼Œè¿˜æœªç ”ç©¶é€ã€‚</p> <p>å¸–å­ç»“è®ºï¼šä»åº“åšä¸ºå…¶ä»–ä»åº“çš„ä¸»åº“æ—¶éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ log-slave-updateså‚æ•°</p> <p>æœ‰å…´è¶£çš„è¯·è§ï¼šhttps://www.cnblogs.com/lit10050528/p/4156755.html</p></blockquote> <p><img src="https://yh-sun.github.io/note-cloud/1602729197455.png" alt="enter description here"></p> <h4 id="ä¿å¸2å¿«å‡ºçš„ä¸»ä»é…ç½®"><a href="#ä¿å¸2å¿«å‡ºçš„ä¸»ä»é…ç½®" class="header-anchor">#</a> ä¿å¸2å¿«å‡ºçš„ä¸»ä»é…ç½®</h4> <p>my.cnf</p> <div class="language- extra-class"><pre class="language-text"><code>[client]
port=3306

default-character-set=utf8mb4

socket=/home/mysql/mysql.sock

[mysqld]
port=3306

# character
character-set-server=utf8mb4
collation-server=utf8mb4_general_ci

# work dir
basedir=/home/mysql
datadir=/home/mysql/data
pid-file=/home/mysql/mysql.pid
socket=/home/mysql/mysql.sock
log_error=/home/mysql/error.log

# common config
lower_case_table_names=1
# sql_mode='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'


# mysql read write config
server-id=2
log-bin=mysql-bin
binlog_format=ROW
binlog_row_image=minimal

binlog-do-db=ts_kscd_dev
binlog-do-db=shard_test0
binlog-do-db=shard_test1

slave_skip_errors = all

</code></pre></div><p>å®‰è£…</p> <div class="language- extra-class"><pre class="language-text"><code>bin/mysqld \
--defaults-file=/home/kscd/mysql/my.cnf \
--initialize \
--user=kscd \
--basedir=/home/kscd/mysql \
--datadir=/home/kscd/mysql/data
</code></pre></div><p>å¯åŠ¨</p> <div class="language- extra-class"><pre class="language-text"><code>bin/mysqld_safe \
--defaults-file=/home/kscd/mysql/my.cnf \
--user=kscd &amp;

</code></pre></div><h4 id="ä¿å¸1å¿«å‡ºä¸»ä»é…ç½®"><a href="#ä¿å¸1å¿«å‡ºä¸»ä»é…ç½®" class="header-anchor">#</a> ä¿å¸1å¿«å‡ºä¸»ä»é…ç½®</h4> <blockquote><p>ä¾›ä¿å¸1å‚è€ƒï¼šç”±äºå°ä½œè€…æ²¡æœ‰copyçš„ä¹ æƒ¯ï¼Œå¾ˆå¤šå‚æ•°éƒ½éœ€è¦ç ”ç©¶åå†åŠ ä¸Šã€‚å¸Œæœ›åç»­å°ä¼™ä¼´å¯ä»¥å°†å‰©ä½™çš„å‚æ•°å®šä¹‰åˆ°é™„å½•ä¸­ï¼›</p> <p>å¦‚æœå†™çš„ä¸å¯¹ï¼Œè¿˜è¯·å¤§å®¶æ‰¹è¯„æŒ‡æ­£å‘€å‘€å‘€~ä¹ˆä¹ˆå“’</p></blockquote> <ul><li><strong>my-master.cnf</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
prompt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">\</span><span class="token punctuation">\</span>u@<span class="token punctuation">\</span><span class="token punctuation">\</span>h<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">\</span><span class="token punctuation">\</span>d<span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">\</span><span class="token punctuation">\</span>_

<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
<span class="token assign-left variable">user</span><span class="token operator">=</span>root
<span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;mysql#123&quot;</span>
socket <span class="token operator">=</span> /data/db/mysql/3306/mysql.sock

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment"># basic settings #</span>
server-id <span class="token operator">=</span> <span class="token number">11</span>
port <span class="token operator">=</span> <span class="token number">3306</span>
bind_address <span class="token operator">=</span> <span class="token number">0.0</span>.0.0
user <span class="token operator">=</span> mysql
sql_mode <span class="token operator">=</span> <span class="token string">&quot;STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER&quot;</span>
autocommit <span class="token operator">=</span> <span class="token number">1</span>
<span class="token assign-left variable">character_set_server</span><span class="token operator">=</span>utf8mb4
transaction_isolation <span class="token operator">=</span> READ-COMMITTED
explicit_defaults_for_timestamp <span class="token operator">=</span> <span class="token number">1</span>
max_allowed_packet <span class="token operator">=</span> <span class="token number">16777216</span>
datadir <span class="token operator">=</span>  /data/db/mysql/3306
innodb_log_group_home_dir <span class="token operator">=</span> /data/db/mysql/3306
innodb_undo_directory <span class="token operator">=</span> /data/db/mysql/3306 
socket <span class="token operator">=</span> /data/db/mysql/3306/mysql.sock

<span class="token assign-left variable">query_cache_type</span><span class="token operator">=</span><span class="token number">0</span> 
<span class="token assign-left variable">query_cache_size</span><span class="token operator">=</span><span class="token number">0</span> 
event_scheduler <span class="token operator">=</span> <span class="token number">1</span>
log_bin_trust_function_creators <span class="token operator">=</span> <span class="token number">1</span>
lower_case_table_names <span class="token operator">=</span> <span class="token number">1</span>

relay_log_purge <span class="token operator">=</span> <span class="token number">0</span>
read_only <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment"># connection #</span>
interactive_timeout <span class="token operator">=</span> <span class="token number">1800</span>
wait_timeout <span class="token operator">=</span> <span class="token number">1800</span>
lock_wait_timeout <span class="token operator">=</span> <span class="token number">1800</span>
skip_name_resolve <span class="token operator">=</span> <span class="token number">1</span>
max_connections <span class="token operator">=</span> <span class="token number">500</span>
max_connect_errors <span class="token operator">=</span> <span class="token number">1000000</span>

<span class="token comment"># table cache performance settings</span>
table_open_cache <span class="token operator">=</span> <span class="token number">4096</span>
table_definition_cache <span class="token operator">=</span> <span class="token number">4096</span>
table_open_cache_instances <span class="token operator">=</span> <span class="token number">128</span>

<span class="token comment"># session memory settings #</span>
read_buffer_size <span class="token operator">=</span> 16M
read_rnd_buffer_size <span class="token operator">=</span> 32M
sort_buffer_size <span class="token operator">=</span> 32M
tmp_table_size <span class="token operator">=</span> 64M
join_buffer_size <span class="token operator">=</span> 128M
thread_cache_size <span class="token operator">=</span> <span class="token number">64</span>

<span class="token comment"># log settings #</span>
log_error <span class="token operator">=</span> error.log
slow_query_log <span class="token operator">=</span> <span class="token number">1</span>
slow_query_log_file <span class="token operator">=</span> slow.log
log_queries_not_using_indexes <span class="token operator">=</span> <span class="token number">1</span>
log_slow_admin_statements <span class="token operator">=</span> <span class="token number">1</span>
log_slow_slave_statements <span class="token operator">=</span> <span class="token number">1</span>
log_throttle_queries_not_using_indexes <span class="token operator">=</span> <span class="token number">10</span>
expire_logs_days <span class="token operator">=</span> <span class="token number">3</span>
long_query_time <span class="token operator">=</span> <span class="token number">2</span>
min_examined_row_limit <span class="token operator">=</span> <span class="token number">100</span>
binlog-rows-query-log-events <span class="token operator">=</span> <span class="token number">1</span>
log-bin-trust-function-creators <span class="token operator">=</span> <span class="token number">1</span>
log-slave-updates <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment"># innodb settings #</span>
innodb_page_size <span class="token operator">=</span> <span class="token number">16384</span>
innodb_buffer_pool_size <span class="token operator">=</span> 20G
innodb_buffer_pool_instances <span class="token operator">=</span> <span class="token number">16</span>
innodb_buffer_pool_load_at_startup <span class="token operator">=</span> <span class="token number">1</span>
innodb_buffer_pool_dump_at_shutdown <span class="token operator">=</span> <span class="token number">1</span>
innodb_lru_scan_depth <span class="token operator">=</span> <span class="token number">2048</span>
innodb_lock_wait_timeout <span class="token operator">=</span> <span class="token number">5</span>
innodb_io_capacity <span class="token operator">=</span> <span class="token number">4000</span>
innodb_io_capacity_max <span class="token operator">=</span> <span class="token number">8000</span>
innodb_flush_method <span class="token operator">=</span> O_DIRECT
innodb_file_format <span class="token operator">=</span> Barracuda
innodb_file_format_max <span class="token operator">=</span> Barracuda
innodb_undo_logs <span class="token operator">=</span> <span class="token number">128</span>
innodb_undo_tablespaces <span class="token operator">=</span> <span class="token number">3</span>
innodb_flush_neighbors <span class="token operator">=</span> <span class="token number">0</span>
innodb_log_file_size <span class="token operator">=</span> 1024M
innodb_log_files_in_group <span class="token operator">=</span> <span class="token number">2</span>
innodb_log_buffer_size <span class="token operator">=</span> <span class="token number">16777216</span>
innodb_purge_threads <span class="token operator">=</span> <span class="token number">4</span>
innodb_large_prefix <span class="token operator">=</span> <span class="token number">1</span>
innodb_thread_concurrency <span class="token operator">=</span> <span class="token number">64</span>
innodb_print_all_deadlocks <span class="token operator">=</span> <span class="token number">1</span>
innodb_strict_mode <span class="token operator">=</span> <span class="token number">1</span>
innodb_sort_buffer_size <span class="token operator">=</span> <span class="token number">67108864</span>
innodb_write_io_threads <span class="token operator">=</span> <span class="token number">16</span>
innodb_read_io_threads <span class="token operator">=</span> <span class="token number">16</span> 
innodb_file_per_table <span class="token operator">=</span> <span class="token number">1</span>
innodb_stats_persistent_sample_pages <span class="token operator">=</span> <span class="token number">64</span>
innodb_autoinc_lock_mode <span class="token operator">=</span> <span class="token number">2</span>
<span class="token assign-left variable">innodb_online_alter_log_max_size</span><span class="token operator">=</span>1G
<span class="token assign-left variable">innodb_open_files</span><span class="token operator">=</span><span class="token number">4096</span>

<span class="token comment"># replication settings #</span>
master_info_repository <span class="token operator">=</span> TABLE
relay_log_info_repository <span class="token operator">=</span> TABLE
log_bin <span class="token operator">=</span> binlog
sync_binlog <span class="token operator">=</span> <span class="token number">1</span>
gtid_mode <span class="token operator">=</span> on
enforce_gtid_consistency <span class="token operator">=</span> <span class="token number">1</span>
log_slave_updates
binlog_format <span class="token operator">=</span> ROW
binlog_rows_query_log_events <span class="token operator">=</span> <span class="token number">1</span>
relay_log <span class="token operator">=</span> relay.log
relay_log_recovery <span class="token operator">=</span> <span class="token number">1</span>
slave_skip_errors <span class="token operator">=</span> ddl_exist_errors
slave-rows-search-algorithms <span class="token operator">=</span> <span class="token string">'INDEX_SCAN,HASH_SCAN'</span>

<span class="token comment"># semi sync replication settings #</span>
plugin_load <span class="token operator">=</span> <span class="token string">&quot;validate_password.so;rpl_semi_sync_master=semisync_master.so;rpl_semi_sync_slave=semisync_slave.so&quot;</span>
rpl_semi_sync_master_enabled <span class="token operator">=</span> <span class="token number">1</span>
rpl_semi_sync_master_timeout <span class="token operator">=</span> <span class="token number">3000</span>
rpl_semi_sync_slave_enabled <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment"># password plugin #</span>
<span class="token assign-left variable">validate_password_policy</span><span class="token operator">=</span>STRONG
validate-password<span class="token operator">=</span>FORCE_PLUS_PERMANENT

<span class="token punctuation">[</span>mysqld-5.6<span class="token punctuation">]</span>
<span class="token comment"># metalock performance settings</span>
<span class="token assign-left variable">metadata_locks_hash_instances</span><span class="token operator">=</span><span class="token number">64</span>

<span class="token punctuation">[</span>mysqld-5.7<span class="token punctuation">]</span>
<span class="token comment"># new innodb settings #</span>
<span class="token assign-left variable">loose_innodb_numa_interleave</span><span class="token operator">=</span><span class="token number">1</span>
innodb_buffer_pool_dump_pct <span class="token operator">=</span> <span class="token number">40</span>
innodb_page_cleaners <span class="token operator">=</span> <span class="token number">16</span>
innodb_undo_log_truncate <span class="token operator">=</span> <span class="token number">1</span>
innodb_max_undo_log_size <span class="token operator">=</span> 2G
innodb_purge_rseg_truncate_frequency <span class="token operator">=</span> <span class="token number">128</span>
<span class="token comment"># new replication settings #</span>
slave-parallel-type <span class="token operator">=</span> LOGICAL_CLOCK
slave-parallel-workers <span class="token operator">=</span> <span class="token number">16</span>
<span class="token assign-left variable">slave_preserve_commit_order</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">slave_transaction_retries</span><span class="token operator">=</span><span class="token number">128</span>
<span class="token comment"># other change settings #</span>
<span class="token assign-left variable">binlog_gtid_simple_recovery</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">log_timestamps</span><span class="token operator">=</span>system
<span class="token assign-left variable">show_compatibility_56</span><span class="token operator">=</span>on
</code></pre></div><ul><li><strong>my-slave.cnf</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
prompt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">\</span><span class="token punctuation">\</span>u@<span class="token punctuation">\</span><span class="token punctuation">\</span>h<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">\</span><span class="token punctuation">\</span>d<span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">\</span><span class="token punctuation">\</span>_

<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
<span class="token assign-left variable">user</span><span class="token operator">=</span>root
<span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;mysql#123&quot;</span>
socket <span class="token operator">=</span> /data/db/mysql/3306/mysql.sock

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment"># basic settings #</span>
server-id <span class="token operator">=</span> <span class="token number">12</span>
port <span class="token operator">=</span> <span class="token number">3306</span>
bind_address <span class="token operator">=</span> <span class="token number">0.0</span>.0.0
user <span class="token operator">=</span> mysql
sql_mode <span class="token operator">=</span> <span class="token string">&quot;STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER&quot;</span>
autocommit <span class="token operator">=</span> <span class="token number">1</span>
<span class="token assign-left variable">character_set_server</span><span class="token operator">=</span>utf8mb4
transaction_isolation <span class="token operator">=</span> READ-COMMITTED
explicit_defaults_for_timestamp <span class="token operator">=</span> <span class="token number">1</span>
max_allowed_packet <span class="token operator">=</span> <span class="token number">16777216</span>
datadir <span class="token operator">=</span>  /data/db/mysql/3306
innodb_log_group_home_dir <span class="token operator">=</span> /data/db/mysql/3306
innodb_undo_directory <span class="token operator">=</span> /data/db/mysql/3306 
socket <span class="token operator">=</span> /data/db/mysql/3306/mysql.sock

<span class="token assign-left variable">query_cache_type</span><span class="token operator">=</span><span class="token number">0</span> 
<span class="token assign-left variable">query_cache_size</span><span class="token operator">=</span><span class="token number">0</span> 
event_scheduler <span class="token operator">=</span> <span class="token number">1</span>
log_bin_trust_function_creators <span class="token operator">=</span> <span class="token number">1</span>
lower_case_table_names <span class="token operator">=</span> <span class="token number">1</span>

relay_log_purge <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment"># connection #</span>
interactive_timeout <span class="token operator">=</span> <span class="token number">1800</span>
wait_timeout <span class="token operator">=</span> <span class="token number">1800</span>
lock_wait_timeout <span class="token operator">=</span> <span class="token number">1800</span>
skip_name_resolve <span class="token operator">=</span> <span class="token number">1</span>
max_connections <span class="token operator">=</span> <span class="token number">500</span>
max_connect_errors <span class="token operator">=</span> <span class="token number">1000000</span>

<span class="token comment"># table cache performance settings</span>
table_open_cache <span class="token operator">=</span> <span class="token number">4096</span>
table_definition_cache <span class="token operator">=</span> <span class="token number">4096</span>
table_open_cache_instances <span class="token operator">=</span> <span class="token number">128</span>

<span class="token comment"># session memory settings #</span>
read_buffer_size <span class="token operator">=</span> 16M
read_rnd_buffer_size <span class="token operator">=</span> 32M
sort_buffer_size <span class="token operator">=</span> 1G
tmp_table_size <span class="token operator">=</span> 1G
join_buffer_size <span class="token operator">=</span> 128M
thread_cache_size <span class="token operator">=</span> <span class="token number">64</span>

<span class="token comment"># log settings #</span>
log_error <span class="token operator">=</span> error.log
slow_query_log <span class="token operator">=</span> <span class="token number">1</span>
slow_query_log_file <span class="token operator">=</span> slow.log
log_queries_not_using_indexes <span class="token operator">=</span> <span class="token number">1</span>
log_slow_admin_statements <span class="token operator">=</span> <span class="token number">1</span>
log_slow_slave_statements <span class="token operator">=</span> <span class="token number">1</span>
log_throttle_queries_not_using_indexes <span class="token operator">=</span> <span class="token number">10</span>
expire_logs_days <span class="token operator">=</span> <span class="token number">3</span>
long_query_time <span class="token operator">=</span> <span class="token number">2</span>
min_examined_row_limit <span class="token operator">=</span> <span class="token number">100</span>
binlog-rows-query-log-events <span class="token operator">=</span> <span class="token number">1</span>
log-bin-trust-function-creators <span class="token operator">=</span> <span class="token number">1</span>
log-slave-updates <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment"># innodb settings #</span>
innodb_page_size <span class="token operator">=</span> <span class="token number">16384</span>
innodb_buffer_pool_size <span class="token operator">=</span> 16G
innodb_buffer_pool_instances <span class="token operator">=</span> <span class="token number">16</span>
innodb_buffer_pool_load_at_startup <span class="token operator">=</span> <span class="token number">1</span>
innodb_buffer_pool_dump_at_shutdown <span class="token operator">=</span> <span class="token number">1</span>
innodb_lru_scan_depth <span class="token operator">=</span> <span class="token number">2048</span>
innodb_lock_wait_timeout <span class="token operator">=</span> <span class="token number">5</span>
innodb_io_capacity <span class="token operator">=</span> <span class="token number">4000</span>
innodb_io_capacity_max <span class="token operator">=</span> <span class="token number">8000</span>
innodb_flush_method <span class="token operator">=</span> O_DIRECT
innodb_file_format <span class="token operator">=</span> Barracuda
innodb_file_format_max <span class="token operator">=</span> Barracuda
innodb_undo_logs <span class="token operator">=</span> <span class="token number">128</span>
innodb_undo_tablespaces <span class="token operator">=</span> <span class="token number">3</span>
innodb_flush_neighbors <span class="token operator">=</span> <span class="token number">0</span>
innodb_log_file_size <span class="token operator">=</span> 1024M
innodb_log_files_in_group <span class="token operator">=</span> <span class="token number">2</span>
innodb_log_buffer_size <span class="token operator">=</span> <span class="token number">16777216</span>
innodb_purge_threads <span class="token operator">=</span> <span class="token number">4</span>
innodb_large_prefix <span class="token operator">=</span> <span class="token number">1</span>
innodb_thread_concurrency <span class="token operator">=</span> <span class="token number">64</span>
innodb_print_all_deadlocks <span class="token operator">=</span> <span class="token number">1</span>
innodb_strict_mode <span class="token operator">=</span> <span class="token number">1</span>
innodb_sort_buffer_size <span class="token operator">=</span> <span class="token number">67108864</span>
innodb_write_io_threads <span class="token operator">=</span> <span class="token number">16</span>
innodb_read_io_threads <span class="token operator">=</span> <span class="token number">16</span> 
innodb_file_per_table <span class="token operator">=</span> <span class="token number">1</span>
innodb_stats_persistent_sample_pages <span class="token operator">=</span> <span class="token number">64</span>
innodb_autoinc_lock_mode <span class="token operator">=</span> <span class="token number">2</span>
<span class="token assign-left variable">innodb_online_alter_log_max_size</span><span class="token operator">=</span>1G
<span class="token assign-left variable">innodb_open_files</span><span class="token operator">=</span><span class="token number">4096</span>

<span class="token comment"># replication settings #</span>
master_info_repository <span class="token operator">=</span> TABLE
relay_log_info_repository <span class="token operator">=</span> TABLE
log_bin <span class="token operator">=</span> binlog
sync_binlog <span class="token operator">=</span> <span class="token number">1</span>
gtid_mode <span class="token operator">=</span> on
enforce_gtid_consistency <span class="token operator">=</span> <span class="token number">1</span>
log_slave_updates
binlog_format <span class="token operator">=</span> ROW
binlog_rows_query_log_events <span class="token operator">=</span> <span class="token number">1</span>
relay_log <span class="token operator">=</span> relay.log
relay_log_recovery <span class="token operator">=</span> <span class="token number">1</span>
slave_skip_errors <span class="token operator">=</span> ddl_exist_errors
slave-rows-search-algorithms <span class="token operator">=</span> <span class="token string">'INDEX_SCAN,HASH_SCAN'</span>

<span class="token comment"># semi sync replication settings #</span>
plugin_load <span class="token operator">=</span> <span class="token string">&quot;validate_password.so;rpl_semi_sync_master=semisync_master.so;rpl_semi_sync_slave=semisync_slave.so&quot;</span>
rpl_semi_sync_master_enabled <span class="token operator">=</span> <span class="token number">1</span>
rpl_semi_sync_master_timeout <span class="token operator">=</span> <span class="token number">3000</span>
rpl_semi_sync_slave_enabled <span class="token operator">=</span> <span class="token number">1</span>

read_only <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment"># password plugin #</span>
<span class="token assign-left variable">validate_password_policy</span><span class="token operator">=</span>STRONG
validate-password<span class="token operator">=</span>FORCE_PLUS_PERMANENT

<span class="token punctuation">[</span>mysqld-5.6<span class="token punctuation">]</span>
<span class="token comment"># metalock performance settings</span>
<span class="token assign-left variable">metadata_locks_hash_instances</span><span class="token operator">=</span><span class="token number">64</span>

<span class="token punctuation">[</span>mysqld-5.7<span class="token punctuation">]</span>
<span class="token comment"># new innodb settings #</span>
<span class="token assign-left variable">loose_innodb_numa_interleave</span><span class="token operator">=</span><span class="token number">1</span>
innodb_buffer_pool_dump_pct <span class="token operator">=</span> <span class="token number">40</span>
innodb_page_cleaners <span class="token operator">=</span> <span class="token number">16</span>
innodb_undo_log_truncate <span class="token operator">=</span> <span class="token number">1</span>
innodb_max_undo_log_size <span class="token operator">=</span> 2G
innodb_purge_rseg_truncate_frequency <span class="token operator">=</span> <span class="token number">128</span>
<span class="token comment"># new replication settings #</span>
slave-parallel-type <span class="token operator">=</span> LOGICAL_CLOCK
slave-parallel-workers <span class="token operator">=</span> <span class="token number">16</span>
<span class="token assign-left variable">slave_preserve_commit_order</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">slave_transaction_retries</span><span class="token operator">=</span><span class="token number">128</span>
<span class="token comment"># other change settings #</span>
<span class="token assign-left variable">binlog_gtid_simple_recovery</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">log_timestamps</span><span class="token operator">=</span>system
<span class="token assign-left variable">show_compatibility_56</span><span class="token operator">=</span>on
</code></pre></div><h4 id="mysqlä¸»ä»å¤åˆ¶-å¯åŠ¨slaveæ—¶-å‡ºç°ä¸‹é¢æŠ¥é”™-slave-failed-to-initialize-relay-log-info-structure-from-the-repository"><a href="#mysqlä¸»ä»å¤åˆ¶-å¯åŠ¨slaveæ—¶-å‡ºç°ä¸‹é¢æŠ¥é”™-slave-failed-to-initialize-relay-log-info-structure-from-the-repository" class="header-anchor">#</a> MySQLä¸»ä»å¤åˆ¶ï¼Œå¯åŠ¨slaveæ—¶ï¼Œå‡ºç°ä¸‹é¢æŠ¥é”™ï¼šSlave failed to initialize relay log info structure from the repository</h4> <div class="language-crmsh extra-class"><pre class="language-text"><code>MySQLä¸»ä»å¤åˆ¶ï¼Œå¯åŠ¨slaveæ—¶ï¼Œå‡ºç°ä¸‹é¢æŠ¥é”™ï¼š
mysql&gt; start slave;
ERROR 1872 (HY000): Slave failed to initialize relay log info structure from the repository

è§£å†³åŠæ³•ï¼šæŸ¥çœ‹æ—¥å¿—ï¼Œ
è¿™é‡Œå†™å›¾ç‰‡æè¿°
å¯ä»¥çœ‹åˆ°æŠ¥é”™ï¼ŒåŸæ¥æ˜¯æ‰¾ä¸åˆ°./server246-relay-bin.indexæ–‡ä»¶ï¼Œæ‰¾åˆ°åŸå› æ‰€åœ¨äº†ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯å†·å¤‡ä»½æ–‡ä»¶æ¢å¤çš„å®ä¾‹ï¼Œåœ¨mysqlåº“ä¸­çš„slave_relay_log_infoè¡¨ä¸­ä¾ç„¶ä¿ç•™ä¹‹å‰relay_logçš„ä¿¡æ¯ï¼Œæ‰€ä»¥å¯¼è‡´å¯åŠ¨slaveæŠ¥é”™ã€‚
mysqlæä¾›äº†å·¥å…·ç”¨æ¥åˆ é™¤è®°å½•ï¼šslave resetï¼›
slave resetæ‰§è¡Œå€™åšäº†è¿™æ ·å‡ ä»¶äº‹ï¼š
1ã€åˆ é™¤slave_master_info ï¼Œslave_relay_log_infoä¸¤ä¸ªè¡¨ä¸­æ•°æ®ï¼›
2ã€åˆ é™¤æ‰€æœ‰relay logæ–‡ä»¶ï¼Œå¹¶é‡æ–°åˆ›å»ºæ–°çš„relay logæ–‡ä»¶ï¼›
3ã€ä¸ä¼šæ”¹å˜gtid_executed æˆ–è€… gtid_purgedçš„å€¼

mysql&gt; reset slave;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; change master to ......

mysql&gt; start slave;
Query OK, 0 rows affected (0.00 sec)
1
2
3
4
5
6
7
8
è¿™æ ·slave å°±å¯ä»¥å¯åŠ¨äº†ã€‚
</code></pre></div><h2 id="shardingsphere-proxy"><a href="#shardingsphere-proxy" class="header-anchor">#</a> shardingsphere-proxy</h2> <h3 id="ä¸‹è½½sharding-proxy"><a href="#ä¸‹è½½sharding-proxy" class="header-anchor">#</a> ä¸‹è½½sharding-proxy</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># æœ¬æ¬¡éƒ¨ç½²åœ¨ï¼š10.10.10.1çš„/home/shardingsphereï¼Œä¸ä¸»åº“åœ¨ä¸€å°æœºå™¨</span>
<span class="token comment"># é•œåƒç«™ç½‘å€ï¼Œä¸‹è½½çš„å¿«</span>
<span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/apache/shardingsphere/4.1.0/apache-shardingsphere-4.1.0-sharding-proxy-bin.tar.gz

<span class="token comment"># è§£å‹</span>
<span class="token function">tar</span> -xf apache-shardingsphere-4.1.0-sharding-proxy-bin.tar.gz
</code></pre></div><ul><li><strong>vim server.yaml</strong></li></ul> <blockquote><p>shardingsphere-proxyçš„æœåŠ¡é…ç½®</p></blockquote> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># è®¤è¯ä¿¡æ¯</span>
<span class="token key atrule">authentication</span><span class="token punctuation">:</span>
  <span class="token key atrule">users</span><span class="token punctuation">:</span>
    <span class="token key atrule">root</span><span class="token punctuation">:</span>
      <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">sharding</span><span class="token punctuation">:</span>
      <span class="token key atrule">password</span><span class="token punctuation">:</span> sharding
      <span class="token key atrule">authorizedSchemas</span><span class="token punctuation">:</span> sharding_db

<span class="token comment"># å…¬ç”¨å±æ€§</span>
<span class="token key atrule">props</span><span class="token punctuation">:</span>
  <span class="token key atrule">max.connections.size.per.query</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">acceptor.size</span><span class="token punctuation">:</span> <span class="token number">16</span>  <span class="token comment"># The default value is available processors count * 2.</span>
  <span class="token key atrule">executor.size</span><span class="token punctuation">:</span> <span class="token number">16</span>  <span class="token comment"># Infinite by default.</span>
  <span class="token key atrule">proxy.frontend.flush.threshold</span><span class="token punctuation">:</span> <span class="token number">128</span>  <span class="token comment"># The default value is 128.</span>
    <span class="token comment"># LOCAL: Proxy will run with LOCAL transaction.</span>
    <span class="token comment"># XA: Proxy will run with XA transaction.</span>
    <span class="token comment"># BASE: Proxy will run with B.A.S.E transaction.</span>
  <span class="token key atrule">proxy.transaction.type</span><span class="token punctuation">:</span> LOCAL
  <span class="token key atrule">proxy.opentracing.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">proxy.hint.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">query.with.cipher.column</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">sql.show</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">allow.range.query.with.inline.sharding</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre></div><ul><li><strong>vim config-master_slave.yaml</strong></li></ul> <blockquote><p>è¯»å†™åˆ†ç¦»çš„é…ç½®</p></blockquote> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">schemaName</span><span class="token punctuation">:</span> sharding_db

<span class="token key atrule">dataSources</span><span class="token punctuation">:</span>
  <span class="token comment"># ä¸»åº“åœ°å€</span>
  <span class="token key atrule">master_ds</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//10.10.10.1<span class="token punctuation">:</span>3306/ts_kscd_dev<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> kscd
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">'mima2018@'</span>
    <span class="token key atrule">connectionTimeoutMilliseconds</span><span class="token punctuation">:</span> <span class="token number">30000</span>
    <span class="token key atrule">idleTimeoutMilliseconds</span><span class="token punctuation">:</span> <span class="token number">60000</span>
    <span class="token key atrule">maxLifetimeMilliseconds</span><span class="token punctuation">:</span> <span class="token number">1800000</span>
    <span class="token key atrule">maxPoolSize</span><span class="token punctuation">:</span> <span class="token number">50</span>
  <span class="token comment"># ä»åº“åœ°å€</span>
  <span class="token key atrule">slave_ds_0</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//10.10.10.2<span class="token punctuation">:</span>3306/ts_kscd_dev<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">'@mima18'</span>
    <span class="token key atrule">connectionTimeoutMilliseconds</span><span class="token punctuation">:</span> <span class="token number">30000</span>
    <span class="token key atrule">idleTimeoutMilliseconds</span><span class="token punctuation">:</span> <span class="token number">60000</span>
    <span class="token key atrule">maxLifetimeMilliseconds</span><span class="token punctuation">:</span> <span class="token number">1800000</span>
    <span class="token key atrule">maxPoolSize</span><span class="token punctuation">:</span> <span class="token number">50</span>

<span class="token comment"># è¯»å†™åˆ†ç¦»é…ç½®</span>
<span class="token key atrule">masterSlaveRule</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ms_ds
  <span class="token key atrule">masterDataSourceName</span><span class="token punctuation">:</span> master_ds
  <span class="token key atrule">slaveDataSourceNames</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> slave_ds_0
</code></pre></div><h3 id="ä¸‹è½½mysqlè¿æ¥é©±åŠ¨"><a href="#ä¸‹è½½mysqlè¿æ¥é©±åŠ¨" class="header-anchor">#</a> ä¸‹è½½mysqlè¿æ¥é©±åŠ¨</h3> <blockquote><p>ç”±äºæ²¡æœ‰æä¾›è‡ªå¸¦çš„mysqlè¿æ¥é©±åŠ¨ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¸‹è½½æ”¾å…¥libåŒ…ä¸‹ï¼Œå¾ˆç®€å•</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># è§£å‹åæ”¾åˆ°libç›®å½•ä¸‹</span>
<span class="token function">wget</span> https://cdn.mysql.com//Downloads/Connector-J/mysql-connector-java-5.1.49.tar.gz
</code></pre></div><h3 id="ä½¿ç”¨-2"><a href="#ä½¿ç”¨-2" class="header-anchor">#</a> ä½¿ç”¨</h3> <h4 id="å¯åŠ¨proxy"><a href="#å¯åŠ¨proxy" class="header-anchor">#</a> å¯åŠ¨proxyï¼š</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># proxyé»˜è®¤ç«¯å£æ˜¯3307,ä½†å¯èƒ½ç”±äºç«¯å£å†²çªï¼Œæ‰€ä»¥æœ¬æ¬¡æš‚æ‹Ÿå®š8884</span>
<span class="token function">sh</span> bin/start.sh <span class="token number">8884</span>

<span class="token comment"># æ—¥å¿—ç›®å½•</span>
<span class="token function">tail</span> -f ~/logs/stdout.log
</code></pre></div><h4 id="navicatè¿æ¥proxyä»£ç†æ•°æ®æº"><a href="#navicatè¿æ¥proxyä»£ç†æ•°æ®æº" class="header-anchor">#</a> Navicatè¿æ¥proxyä»£ç†æ•°æ®æº</h4> <blockquote><p>å¦‚å›¾1ï¼Œã€æµ‹è¯•è¿æ¥ã€‘é€šè¿‡åå³å¯ï¼›åƒä¸‡ä¸è¦è¿ï¼Œå°ä½œè€…æ‰¾åˆ°äº†å®˜ç½‘çš„ä¸€å¥è¯ï¼Œè§å›¾2ã€‚</p></blockquote> <p><img src="https://yh-sun.github.io/note-cloud/1602729298930.png" alt="enter description here"> <img src="https://yh-sun.github.io/note-cloud/1602729309009.png" alt="enter description here"></p> <h4 id="ä½¿ç”¨ideaè¿æ¥-æŸ¥çœ‹æ•°æ®"><a href="#ä½¿ç”¨ideaè¿æ¥-æŸ¥çœ‹æ•°æ®" class="header-anchor">#</a> ä½¿ç”¨IDEAè¿æ¥ï¼ŒæŸ¥çœ‹æ•°æ®</h4> <p><img src="https://yh-sun.github.io/note-cloud/1602729317049.png" alt="enter description here"></p> <h4 id="åç»­"><a href="#åç»­" class="header-anchor">#</a> åç»­</h4> <p><img src="https://yh-sun.github.io/note-cloud/1602729331396.png" alt="enter description here"></p> <blockquote><p>åç»­å‘ç°ï¼Œproxyæ–¹å¼è¿˜å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæ•…è€Œæ–‡ç« å…ˆåˆ°æ­¤ä¸ºæ­¢ã€‚</p> <blockquote><p>1.å¦‚æœä¸€æ¡æ•°æ®ä¸­2+ä¸ªå­—æ®µä¸ºNULLæ—¶ï¼ŒæŸ¥è¯¢sqlä¼šæŠ¥æ•°ç»„è§’æ ‡è¶Šç•Œï¼›</p> <p>2.ä¸­æ–‡ç¼–ç é—®é¢˜ï¼›</p> <p>3.è¿æ¥æ± ä½¿ç”¨æ˜¯å¦æœ‰æ•ˆã€è§„èŒƒï¼›</p></blockquote></blockquote> <hr> <h2 id="shardingsphere-jdbc"><a href="#shardingsphere-jdbc" class="header-anchor">#</a> shardingsphere-jdbc</h2> <blockquote><p>ç”±äºproxyèµ„æ–™è¾ƒå°‘ï¼Œå¯æ§æ€§ä¸å¼ºã€‚åœ¨åˆæ­¥é˜¶æ®µé€‰æ‹©é‡‡ç”¨åŸå§‹jdbcæ–¹å¼ã€‚</p></blockquote> <ul><li><strong>POMä¾èµ–å¼•å…¥</strong></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--sharding-jdbcè¯»å†™åˆ†ç¦»ç­‰é…ç½®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.shardingsphere<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sharding-jdbc-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.0.0-RC1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--è¦æŠŠguavaéš”ç¦»ï¼Œå› ä¸ºswaggerä¹Ÿå¼•å…¥äº†æ­¤åŒ…é€ æˆå†²çªï¼Œéšä¾¿åˆ é™¤ä¸€ä¸ªä½ç‰ˆæœ¬å°±å¯ä»¥ï¼›è¿™é‡Œæ˜¯çœŸçš„å‘0=0--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.google.guava<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>guava<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>é…ç½®</strong></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># ä»…ä»¥è¯»å†™åˆ†ç¦»ä¸ºä¾‹ï¼›</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">shardingsphere</span><span class="token punctuation">:</span>
        <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
          <span class="token key atrule">names</span><span class="token punctuation">:</span> master<span class="token punctuation">,</span>slave
          
          <span class="token comment"># ä¸»åº“ï¼Œä¸è¦ä½¿ç”¨_å‘½åï¼Œä¼šå‡ºç°è§£æå¤±è´¥</span>
          <span class="token key atrule">master</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> com.zaxxer.hikari.HikariDataSource
            <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
            <span class="token key atrule">jdbc-url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//10.10.10.1<span class="token punctuation">:</span>3306/ts_kscd_dev<span class="token punctuation">?</span>serverTimezone=UTC<span class="token important">&amp;useSSL=false</span>
            <span class="token key atrule">username</span><span class="token punctuation">:</span> kscd
            <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">'mima2018@'</span>
          <span class="token comment"># ä»åº“</span>
          <span class="token key atrule">slave</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> com.zaxxer.hikari.HikariDataSource
            <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
            <span class="token key atrule">jdbc-url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//10.10.10.2<span class="token punctuation">:</span>3306/ts_kscd_dev<span class="token punctuation">?</span>serverTimezone=UTC<span class="token important">&amp;useSSL=false</span>
            <span class="token key atrule">username</span><span class="token punctuation">:</span> root
            <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">'@mima18'</span>
            
        <span class="token comment"># é…ç½®è¯»å†™åˆ†ç¦»masterã€slave</span>
        <span class="token key atrule">masterslave</span><span class="token punctuation">:</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> ds_ms
          <span class="token key atrule">master-data-source-name</span><span class="token punctuation">:</span> master
          <span class="token key atrule">slave-data-source-names</span><span class="token punctuation">:</span> slave
        
        <span class="token comment"># æ‰“å°sqlï¼Œæ–¹ä¾¿æŸ¥æ‰¾é—®é¢˜</span>
        <span class="token key atrule">props</span><span class="token punctuation">:</span>
          <span class="token key atrule">sql.show</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><ul><li><em>è¯»å†™åˆ†ç¦»å·²å®Œæˆï¼Œåç»­åŠ å…¥åˆ†ç‰‡è§„åˆ™</em></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/Jenkins.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        Jenkins
      </a></span> <span class="next"><a href="/blog/Nacos.html">
        Nacos
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7a41048e.js" defer></script><script src="/assets/js/2.07b944df.js" defer></script><script src="/assets/js/11.626aef4a.js" defer></script>
  </body>
</html>